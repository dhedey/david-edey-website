---
import type { CollectionEntry } from 'astro:content';
import Tags from './Tags.astro';

interface Props {
    posts: CollectionEntry<'blog'>[];
}

const { posts } = Astro.props;
posts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());

function formatDate(date: Date) {
    return date.toISOString().split('T')[0];
}
---

<ul class="w-full">
    {posts.map(post => (
        <li class="m-6 list-disc">
            <div class="flex flex-col gap-2 mb-6">
                <span class="text-xl font-semibold">{formatDate(post.data.pubDate)} | <a href={`/blog/${post.id}`} class="text-blue-600 hover:underline">{post.data.title}</a></span>
                <div class="text-gray-500 text-sm">{post.data.description}</div>
                <Tags names={post.data.tags} />
            </div>
        </li>
    ))}
</ul>
